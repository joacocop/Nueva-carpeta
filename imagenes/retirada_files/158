(()=>{(()=>{var Ht={3156:function(I,O,E){(function(F,k){I.exports=O=k()})(this,function(){var F=F||function(k,V){var L;if(typeof window!="undefined"&&window.crypto&&(L=window.crypto),typeof self!="undefined"&&self.crypto&&(L=self.crypto),typeof globalThis!="undefined"&&globalThis.crypto&&(L=globalThis.crypto),!L&&typeof window!="undefined"&&window.msCrypto&&(L=window.msCrypto),!L&&typeof E.g!="undefined"&&E.g.crypto&&(L=E.g.crypto),!L)try{L=E(477)}catch(d){}var M=function(){if(L){if(typeof L.getRandomValues=="function")try{return L.getRandomValues(new Uint32Array(1))[0]}catch(d){}if(typeof L.randomBytes=="function")try{return L.randomBytes(4).readInt32LE()}catch(d){}}throw new Error("Native crypto module could not be used to get secure random number.")},B=Object.create||function(){function d(){}return function(p){var m;return d.prototype=p,m=new d,d.prototype=null,m}}(),rt={},tt=rt.lib={},Q=tt.Base=function(){return{extend:function(d){var p=B(this);return d&&p.mixIn(d),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var p in d)d.hasOwnProperty(p)&&(this[p]=d[p]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),D=tt.WordArray=Q.extend({init:function(d,p){d=this.words=d||[],p!=V?this.sigBytes=p:this.sigBytes=d.length*4},toString:function(d){return(d||N).stringify(this)},concat:function(d){var p=this.words,m=d.words,A=this.sigBytes,R=d.sigBytes;if(this.clamp(),A%4)for(var w=0;w<R;w++){var Y=m[w>>>2]>>>24-w%4*8&255;p[A+w>>>2]|=Y<<24-(A+w)%4*8}else for(var U=0;U<R;U+=4)p[A+U>>>2]=m[U>>>2];return this.sigBytes+=R,this},clamp:function(){var d=this.words,p=this.sigBytes;d[p>>>2]&=4294967295<<32-p%4*8,d.length=k.ceil(p/4)},clone:function(){var d=Q.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var p=[],m=0;m<d;m+=4)p.push(M());return new D.init(p,d)}}),Z=rt.enc={},N=Z.Hex={stringify:function(d){for(var p=d.words,m=d.sigBytes,A=[],R=0;R<m;R++){var w=p[R>>>2]>>>24-R%4*8&255;A.push((w>>>4).toString(16)),A.push((w&15).toString(16))}return A.join("")},parse:function(d){for(var p=d.length,m=[],A=0;A<p;A+=2)m[A>>>3]|=parseInt(d.substr(A,2),16)<<24-A%8*4;return new D.init(m,p/2)}},H=Z.Latin1={stringify:function(d){for(var p=d.words,m=d.sigBytes,A=[],R=0;R<m;R++){var w=p[R>>>2]>>>24-R%4*8&255;A.push(String.fromCharCode(w))}return A.join("")},parse:function(d){for(var p=d.length,m=[],A=0;A<p;A++)m[A>>>2]|=(d.charCodeAt(A)&255)<<24-A%4*8;return new D.init(m,p)}},f=Z.Utf8={stringify:function(d){try{return decodeURIComponent(escape(H.stringify(d)))}catch(p){throw new Error("Malformed UTF-8 data")}},parse:function(d){return H.parse(unescape(encodeURIComponent(d)))}},P=tt.BufferedBlockAlgorithm=Q.extend({reset:function(){this._data=new D.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=f.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var p,m=this._data,A=m.words,R=m.sigBytes,w=this.blockSize,Y=w*4,U=R/Y;d?U=k.ceil(U):U=k.max((U|0)-this._minBufferSize,0);var J=U*w,nt=k.min(J*4,R);if(J){for(var et=0;et<J;et+=w)this._doProcessBlock(A,et);p=A.splice(0,J),m.sigBytes-=nt}return new D.init(p,nt)},clone:function(){var d=Q.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0}),j=tt.Hasher=P.extend({cfg:Q.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var p=this._doFinalize();return p},blockSize:512/32,_createHelper:function(d){return function(p,m){return new d.init(m).finalize(p)}},_createHmacHelper:function(d){return function(p,m){return new W.HMAC.init(d,m).finalize(p)}}}),W=rt.algo={};return rt}(Math);return F})},2316:function(I,O,E){(function(F,k){I.exports=O=k(E(3156))})(this,function(F){return function(k){var V=F,L=V.lib,M=L.WordArray,B=L.Hasher,rt=V.algo,tt=[],Q=[];(function(){function N(j){for(var W=k.sqrt(j),d=2;d<=W;d++)if(!(j%d))return!1;return!0}function H(j){return(j-(j|0))*4294967296|0}for(var f=2,P=0;P<64;)N(f)&&(P<8&&(tt[P]=H(k.pow(f,.5))),Q[P]=H(k.pow(f,.3333333333333333)),P++),f++})();var D=[],Z=rt.SHA256=B.extend({_doReset:function(){this._hash=new M.init(tt.slice(0))},_doProcessBlock:function(N,H){for(var f=this._hash.words,P=f[0],j=f[1],W=f[2],d=f[3],p=f[4],m=f[5],A=f[6],R=f[7],w=0;w<64;w++){if(w<16)D[w]=N[H+w]|0;else{var Y=D[w-15],U=(Y<<25|Y>>>7)^(Y<<14|Y>>>18)^Y>>>3,J=D[w-2],nt=(J<<15|J>>>17)^(J<<13|J>>>19)^J>>>10;D[w]=U+D[w-7]+nt+D[w-16]}var et=p&m^~p&A,lt=P&j^P&W^j&W,ht=(P<<30|P>>>2)^(P<<19|P>>>13)^(P<<10|P>>>22),pt=(p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25),st=R+pt+et+Q[w]+D[w],at=ht+lt;R=A,A=m,m=p,p=d+st|0,d=W,W=j,j=P,P=st+at|0}f[0]=f[0]+P|0,f[1]=f[1]+j|0,f[2]=f[2]+W|0,f[3]=f[3]+d|0,f[4]=f[4]+p|0,f[5]=f[5]+m|0,f[6]=f[6]+A|0,f[7]=f[7]+R|0},_doFinalize:function(){var N=this._data,H=N.words,f=this._nDataBytes*8,P=N.sigBytes*8;return H[P>>>5]|=128<<24-P%32,H[(P+64>>>9<<4)+14]=k.floor(f/4294967296),H[(P+64>>>9<<4)+15]=f,N.sigBytes=H.length*4,this._process(),this._hash},clone:function(){var N=B.clone.call(this);return N._hash=this._hash.clone(),N}});V.SHA256=B._createHelper(Z),V.HmacSHA256=B._createHmacHelper(Z)}(Math),F.SHA256})},116:()=>{(function(I,O){"use strict";I=I||"docReady",O=O||window;var E=[],F=!1,k=!1;function V(){if(!F){F=!0;for(var M=0;M<E.length;M++)E[M].fn.call(window,E[M].ctx);E=[]}}function L(){document.readyState==="complete"&&V()}O[I]=function(M,B){if(typeof M!="function")throw new TypeError("callback for docReady(fn) must be a function");if(F){setTimeout(function(){M(B)},1);return}else E.push({fn:M,ctx:B});document.readyState==="complete"||!document.attachEvent&&document.readyState==="interactive"?setTimeout(V,1):k||(document.addEventListener?(document.addEventListener("DOMContentLoaded",V,!1),window.addEventListener("load",V,!1)):(document.attachEvent("onreadystatechange",L),window.attachEvent("onload",V)),k=!0)}})("docReady",window)},477:()=>{}},_t={};function K(I){var O=_t[I];if(O!==void 0)return O.exports;var E=_t[I]={exports:{}};return Ht[I].call(E.exports,E,E.exports,K),E.exports}K.n=I=>{var O=I&&I.__esModule?()=>I.default:()=>I;return K.d(O,{a:O}),O},K.d=(I,O)=>{for(var E in O)K.o(O,E)&&!K.o(I,E)&&Object.defineProperty(I,E,{enumerable:!0,get:O[E]})},K.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(I){if(typeof window=="object")return window}}(),K.o=(I,O)=>Object.prototype.hasOwnProperty.call(I,O);var fe={};(()=>{"use strict";var I=K(2316),O=K.n(I);const E=document,F=null,k=null,V=()=>{const n=E.createElement("a");return n.href=k.location,n},L=(n,t)=>{const e=E.createElement("img");return e.height=1,e.width=1,e.style.display="none",e.src=n,e.onload=t,e.alt="",E.body.appendChild(e)},M=n=>{const t=E.createElement("iframe");return t.width=1,t.height=1,t.style.display="none",t.src=n,E.body.appendChild(t)},B=(n,t=!0)=>{const e=E.createElement("script");return e.type="text/javascript",e.src=n,e.async=t,E.body.appendChild(e)},rt={img:L,script:B,iframe:M},tt=(n,t)=>{t||(t=window.location.href),n=n.replace(/[\[\]]/g,"\\$&");let e=new RegExp("[?&]"+n+"(=([^&#]*)|&|#|$)"),r=e.exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null},Q=(n,t,e=()=>{},r=1e3)=>{function s(o,a,g,S){e(g)}const i=new XMLHttpRequest;i.open("get",n,!0),i.timeout=r,i.withCredentials=!0,i.ontimeout=()=>{const o=new Error(`Timeout after ${r}, url : ${n}`);s("AjaxTimeout",`Timeout after ${r}`,o,i)},i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=()=>{if(i.readyState===4){const o=i.status;if(o>=200&&o<300||o===304)t(i.responseText,i);else{const a=new Error(`Incorrect status received : ${o}`);s("XHRError",`Error during XHR call: ${o}, url: ${n}`,a,i)}}},i.send()},D=n=>{let t="_au_"+n+"=",r=decodeURIComponent(document.cookie).split(";");for(let s=0;s<r.length;s++){let i=r[s];for(;i.charAt(0)==" ";)i=i.substring(1);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return null},Z=(n,t,e)=>(parseInt(D(n))||0)+t<e,N=n=>{const t=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i;let r=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,s=n.split("."),i=s[s.length-1];(i.length>4||i==="com"||i==="org"||i==="net")&&(r=t);let o=n.match(r);return o?o[0]:n},H=(n,t)=>{document.cookie="_au_"+n+"="+t+"; domain="+N(document.location.hostname)+"; path=/; max-age=31536000"};function f(n){let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ".split("");n||(n=Math.floor(Math.random()*t.length));let e="";for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e}function P(){const n=Math.round(Date.now()/1e3);return"AU1S-0100-"+String(n).padStart(12,"0")+"-"+f(8)+"-"+f(4)}function j(n){function t(v,y){var C,_,G,$,b;return G=v&2147483648,$=y&2147483648,C=v&1073741824,_=y&1073741824,b=(v&1073741823)+(y&1073741823),C&_?b^2147483648^G^$:C|_?b&1073741824?b^3221225472^G^$:b^1073741824^G^$:b^G^$}function e(v,y,C,_,G,$,b){return v=t(v,t(t(y&C|~y&_,G),b)),t(v<<$|v>>>32-$,y)}function r(v,y,C,_,G,$,b){return v=t(v,t(t(y&_|C&~_,G),b)),t(v<<$|v>>>32-$,y)}function s(v,y,C,_,G,$,b){return v=t(v,t(t(y^C^_,G),b)),t(v<<$|v>>>32-$,y)}function i(v,y,C,_,G,$,b){return v=t(v,t(t(C^(y|~_),G),b)),t(v<<$|v>>>32-$,y)}function o(v){var y="",C="",_;for(_=0;3>=_;_++)C=v>>>8*_&255,C="0"+C.toString(16),y+=C.substr(C.length-2,2);return y}var a=[],g,S,T,x,l,u,c,h;for(n=function(v){v=v.replace(/\r\n/g,`
`);for(var y="",C=0;C<v.length;C++){var _=v.charCodeAt(C);128>_?y+=String.fromCharCode(_):(127<_&&2048>_?y+=String.fromCharCode(_>>6|192):(y+=String.fromCharCode(_>>12|224),y+=String.fromCharCode(_>>6&63|128)),y+=String.fromCharCode(_&63|128))}return y}(n),a=function(v){var y,C=v.length;y=C+8;for(var _=16*((y-y%64)/64+1),G=Array(_-1),$=0,b=0;b<C;)y=(b-b%4)/4,$=b%4*8,G[y]|=v.charCodeAt(b)<<$,b++;return y=(b-b%4)/4,G[y]|=128<<b%4*8,G[_-2]=C<<3,G[_-1]=C>>>29,G}(n),l=1732584193,u=4023233417,c=2562383102,h=271733878,n=0;n<a.length;n+=16)g=l,S=u,T=c,x=h,l=e(l,u,c,h,a[n+0],7,3614090360),h=e(h,l,u,c,a[n+1],12,3905402710),c=e(c,h,l,u,a[n+2],17,606105819),u=e(u,c,h,l,a[n+3],22,3250441966),l=e(l,u,c,h,a[n+4],7,4118548399),h=e(h,l,u,c,a[n+5],12,1200080426),c=e(c,h,l,u,a[n+6],17,2821735955),u=e(u,c,h,l,a[n+7],22,4249261313),l=e(l,u,c,h,a[n+8],7,1770035416),h=e(h,l,u,c,a[n+9],12,2336552879),c=e(c,h,l,u,a[n+10],17,4294925233),u=e(u,c,h,l,a[n+11],22,2304563134),l=e(l,u,c,h,a[n+12],7,1804603682),h=e(h,l,u,c,a[n+13],12,4254626195),c=e(c,h,l,u,a[n+14],17,2792965006),u=e(u,c,h,l,a[n+15],22,1236535329),l=r(l,u,c,h,a[n+1],5,4129170786),h=r(h,l,u,c,a[n+6],9,3225465664),c=r(c,h,l,u,a[n+11],14,643717713),u=r(u,c,h,l,a[n+0],20,3921069994),l=r(l,u,c,h,a[n+5],5,3593408605),h=r(h,l,u,c,a[n+10],9,38016083),c=r(c,h,l,u,a[n+15],14,3634488961),u=r(u,c,h,l,a[n+4],20,3889429448),l=r(l,u,c,h,a[n+9],5,568446438),h=r(h,l,u,c,a[n+14],9,3275163606),c=r(c,h,l,u,a[n+3],14,4107603335),u=r(u,c,h,l,a[n+8],20,1163531501),l=r(l,u,c,h,a[n+13],5,2850285829),h=r(h,l,u,c,a[n+2],9,4243563512),c=r(c,h,l,u,a[n+7],14,1735328473),u=r(u,c,h,l,a[n+12],20,2368359562),l=s(l,u,c,h,a[n+5],4,4294588738),h=s(h,l,u,c,a[n+8],11,2272392833),c=s(c,h,l,u,a[n+11],16,1839030562),u=s(u,c,h,l,a[n+14],23,4259657740),l=s(l,u,c,h,a[n+1],4,2763975236),h=s(h,l,u,c,a[n+4],11,1272893353),c=s(c,h,l,u,a[n+7],16,4139469664),u=s(u,c,h,l,a[n+10],23,3200236656),l=s(l,u,c,h,a[n+13],4,681279174),h=s(h,l,u,c,a[n+0],11,3936430074),c=s(c,h,l,u,a[n+3],16,3572445317),u=s(u,c,h,l,a[n+6],23,76029189),l=s(l,u,c,h,a[n+9],4,3654602809),h=s(h,l,u,c,a[n+12],11,3873151461),c=s(c,h,l,u,a[n+15],16,530742520),u=s(u,c,h,l,a[n+2],23,3299628645),l=i(l,u,c,h,a[n+0],6,4096336452),h=i(h,l,u,c,a[n+7],10,1126891415),c=i(c,h,l,u,a[n+14],15,2878612391),u=i(u,c,h,l,a[n+5],21,4237533241),l=i(l,u,c,h,a[n+12],6,1700485571),h=i(h,l,u,c,a[n+3],10,2399980690),c=i(c,h,l,u,a[n+10],15,4293915773),u=i(u,c,h,l,a[n+1],21,2240044497),l=i(l,u,c,h,a[n+8],6,1873313359),h=i(h,l,u,c,a[n+15],10,4264355552),c=i(c,h,l,u,a[n+6],15,2734768916),u=i(u,c,h,l,a[n+13],21,1309151649),l=i(l,u,c,h,a[n+4],6,4149444226),h=i(h,l,u,c,a[n+11],10,3174756917),c=i(c,h,l,u,a[n+2],15,718787259),u=i(u,c,h,l,a[n+9],21,3951481745),l=t(l,g),u=t(u,S),c=t(c,T),h=t(h,x);return(o(l)+o(u)+o(c)+o(h)).toLowerCase()}class W{constructor(t){this.pixels=t,this.parameters={sku:"",orderId:"",qty:"",revenue:"",ltv:""}}dropPixel(t,e){const r=this.pixels[t]||[];let s=this.parameters;e&&Object.keys(e).forEach(i=>(s[i]=e[i],!1)),r.forEach(i=>{let o=i,a="img";return typeof i!="string"&&(o=i[0],a=i[1],a||(a="img")),o=o.replace(/\[\[SKU\]\]/g,s.sku),o=o.replace(/\[\[ORDERID\]\]/g,s.orderId),o=o.replace(/\[\[QTY\]\]/g,s.qty),o=o.replace(/\[\[REVENUE\]\]/g,s.revenue),o=o.replace(/\[\[LTV\]\]/g,s.ltv),o=o.replace(/\[\[ITEMS\]\]/g,(s.items||[]).map(g=>g.id||"").join(",")),a==="img"?L(o):a==="script"?B(o):a==="iframe"?M(o):!1})}}const d="auPassiveTagger",p="UA-87198801-1",m="G-FVWZ0RM4DH",A=null,R="https://a.ad.gt",w="https://p.ad.gt",Y="https://pixels.ad.gt",U="https://seg.ad.gt",J="https://ids.ad.gt",nt="https://proton.ad.gt";class et{constructor(t,e){this.partnerId=t,this.taggerId=e,window.aupixels?this.pixels=window.aupixels.ec||{}:this.pixels={},this.ECPixels=new W(this.pixels),this.pageLoadRun=[],window.Adgt||(window.Adgt={}),window.Adgt.VarWatch=function(r,s,i){let o=r[s];function a(){if(r[s]!=o){const g=o;o=r[s],i(g,o)}}return a},window.Adgt.VarHandler=function(r,s){window.au.push({category:"DispatchEvent",eventName:"ProductMetaUpdated"}),clearInterval(window.Adgt.variantInterval)},window.Adgt.SetVarInterval=function(r,s){window.Adgt.variantInterval=setInterval(window.Adgt.VarWatch(r,s,window.Adgt.VarHandler),100)},window.Adgt.Store=this}pathIncludes(t){return window.location.pathname.indexOf(t)!==-1}updatePixels(){this.pixels=window.aupixels.ec||{},this.ECPixels=new W(this.pixels),this.pageLoadRun.forEach(t=>{let e={};t==="add"||t==="view"?e={sku:this.product.id}:t==="checkout"?e={qty:this.qty,revenue:this.revenue}:t==="transaction"&&(e={qty:this.transaction.items.length||this.qty,revenue:this.transaction.revenue||this.revenue,orderId:this.transaction.id}),this.ECPixels.dropPixel(t,e)}),this.pageLoadRun=[]}appendPageLoadPixelCheck(t){this.pageLoadRun.filter(r=>r===t).length||this.pageLoadRun.push(t)}setClassProducts(t){this.products=t,this.qty=t.length,this.revenue=t.reduce((e,r)=>e+parseFloat(r.price),0)}sendAddProductEventToGA(t){this.product=t;try{this.sendAddProductToGA(t),ga(`${d}.ec:setAction`,"add"),ga(`${d}.send`,"event","UX","click","add to cart"),this.ECPixels.dropPixel("add",{sku:t.id,revenue:t.price.toFixed(2)})}catch(e){console.error(e)}}sendViewProductEventToGA(t){this.product=t;try{ga(`${d}.ec:addImpression`,{id:t.id,name:t.name,price:t.price,brand:t.brand}),ga(`${d}.ec:setAction`,"detail"),ga(`${d}.send`,"pageview"),this.ECPixels.dropPixel("view",{sku:t.id})}catch(e){console.error(e)}}sendAllProductsInCartToGA(t,e){this.setClassProducts(t);try{for(let r=0;r<t.length;r++){const s=t[r];this.sendAddProductToGA(s)}return e(),!0}catch(r){return!1}}sendCheckoutEventToGA(){try{ga(`${d}.ec:setAction`,"checkout",{step:1}),ga(`${d}.send`,"event",{eventCategory:"Checkout",eventAction:"checkout",hitCallback:()=>{}}),this.ECPixels.dropPixel("checkout",{qty:this.qty,revenue:this.revenue})}catch(t){console.error(t)}}sendAllProductsInTransactionToGA(t,e){this.setClassProducts(t);try{for(let r=0;r<t.length;r++){const s=t[r];this.sendAddProductToGA(s)}return e(),!0}catch(r){return!1}}sendAddProductToGA(t){ga(`${d}.ec:addProduct`,{id:t.id,name:t.name,brand:t.brand,price:t.price,quantity:t.quantity||1})}sendTransactionEventToGA(t){this.transaction=t;try{ga(`${d}.ec:setAction`,"purchase",{id:t.id,affiliation:t.affiliation,revenue:t.revenue,tax:t.tax,shipping:t.shipping}),ga(`${d}.send`,"pageview"),this.ECPixels.dropPixel("transaction",{qty:(t.items||[]).length||this.qty,revenue:t.revenue||this.revenue,orderId:t.id,items:t.items||[],ltv:t.ltv||""})}catch(e){console.error(e)}}profilerServiceRequest(t){window.au.push({category:"sendUserBehaviour",action:JSON.stringify(t)})}sendErrorToSentry(){return!1}}class lt extends et{constructor(t,e){super(t,e),this.brand=window.Shopify.shop}captureProduct(t){try{const e=window.ShopifyAnalytics.meta.selectedVariantId;let r=window.ShopifyAnalytics.meta.product.variants[0];return t?r=window.ShopifyAnalytics.meta.product.variants.find(function(s){return s.public_title===t}):e&&(r=window.ShopifyAnalytics.meta.product.variants.find(function(s){return s.id.toString()===e.toString()})),r||(r=window.ShopifyAnalytics.meta.product.variants[0],r.id=window.ShopifyAnalytics.meta.product.id),{id:`${r.id}-${this.taggerId}`,name:r.name,price:parseInt(r.price,10)/100,brand:this.brand}}catch(e){return console.error(e),null}}sendProductEvents(){const t=this.captureProduct();if(t){this.sendViewProductEventToGA(t),this.appendPageLoadPixelCheck("view");const e=document.querySelector('button[name="add"]')||document.querySelector("form#add-item-form button")||document.querySelector("button.shopify_add_to_cart")||document.querySelector('input[name="add"]')||document.querySelector(".ProductForm__AddToCart")||document.querySelector("#AddToCart")||document.querySelector('.product-add input[type="submit"]');e&&window.au.push({category:"ListenerAttacher",input:e,method:()=>{this.sendAddProductEventToGA(t),window.au.push({category:"behavior",action:"purchase-intent"});const r={event:"addToCart",data:t};this.profilerServiceRequest(r)}})}}captureCart(){try{const e=document.querySelector("#order-summary").querySelectorAll("tr.product"),r=[];for(let s=0;s<e.length;s++){const i=e[s],o=i.dataset.productId,a=i.querySelector(".product__description__name").textContent,g=parseFloat(i.querySelector(".product__price").textContent.replace(/[^0-9.]/g,"")),S=parseInt(i.querySelector(".product__quantity").textContent.replace(/\s+/g,""),10),T={id:`${o}-${this.taggerId}`,name:a,brand:this.brand,price:g,quantity:S};r.push(T)}return r}catch(t){return console.error(t),null}}calculateRevenue(t){let e=0;for(let r=0;r<t.length;r++)e+=parseFloat(t[r].price);return e}captureTransaction(){try{const t=window.Shopify.checkout,e=window.Shopify.shop,r=t.order_id,s=parseFloat(t.subtotal_price);let i=0;try{i=parseFloat(t.total_tax)}catch(g){console.error(g)}let o=0;if(t.shipping_rate)try{o=parseFloat(t.shipping_rate)}catch(g){try{o=parseFloat(t.shipping_rate.price)}catch(S){console.error(S)}}const a=this.formatProductsInTransaction(t.line_items);return{id:`${r}-${this.taggerId}`,affiliation:e,revenue:s,tax:i,shipping:o,items:a}}catch(t){return console.error(t),null}}formatProductsInTransaction(t){const e=t,r=[];for(let s=0;s<e.length;s++){const i=e[s],o={id:i.product_id,name:i.title,brand:this.brand,price:parseFloat(i.price),quantity:i.quantity};r.push(o)}return r}initialize(){const t={product:window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.product,checkout:window.Shopify.Checkout&&window.Shopify.Checkout.page&&window.Shopify.Checkout.page!=="thank_you",confirmation:window.Shopify.checkout},e=document.querySelectorAll("div.quickadd");if(e.length>0)for(let r=0;r<e.length;r++){const s=e[r],i=s.querySelector("button").dataset.cartAdd;let o=s.querySelector('[class$="item__title"]').textContent;if(s.querySelector(".js-option-value")){const S=s.querySelector(".js-option-value").textContent.split(": ");o+=S[S.length-1]}const a=parseFloat(s.querySelector(".product-price__price").textContent.replace(/[^0-9.]/g,"")),g={id:i,name:o,price:a,brand:this.brand};window.au.push({category:"ListenerAttacher",input:s,method:()=>{this.sendAddProductEventToGA(g);const S={event:"addToCart",data:g};window.au.push({category:"behavior",action:"purchase-intent"}),this.profilerServiceRequest(S)}})}if(t.product){this.sendProductEvents();const r=document.querySelectorAll(".swatch-element");if(r.length>0){window.addEventListener("ProductMetaUpdated",()=>{this.sendProductEvents()});for(let s=0;s<r.length;s++){const i=r[s];window.au.push({category:"ListenerAttacher",input:i,method:()=>{window.Adgt.SetVarInterval(window.ShopifyAnalytics.meta,"selectedVariantId")}})}}}if(t.checkout){const r=this.captureCart();r&&(window.au.push({category:"behavior",action:"checkout"}),this.appendPageLoadPixelCheck("checkout"),this.sendAllProductsInCartToGA(r,()=>this.sendCheckoutEventToGA()))}if(t.confirmation&&window.location.pathname.indexOf("thank_you")!==-1){const r=this.captureTransaction();if(r){const s=r.items;window.au.push({category:"behavior",action:"purchase-complete"}),this.appendPageLoadPixelCheck("transaction"),this.sendAllProductsInTransactionToGA(s,()=>this.sendTransactionEventToGA(r))}else this.transaction={id:`null-${this.taggerId}`,affiliation:this.brand,revenue:0,tax:0,shipping:0,items:[]},this.appendPageLoadPixelCheck("transaction")}}}const ht=lt;class pt{constructor(t,e){this.partnerId=t,this.dataStore=e,this.LAST_SEEN_TCF_KEY="last_seen_iab_tcf",this.LAST_SEEN_CUSTOM_KEY="last_seen_iab_custom",this.COOKIE_TTL=30*24*60*60*1e3}SendToQueue(t){return Z(this.LAST_SEEN_CUSTOM_KEY,this.COOKIE_TTL,1*new Date)&&(window.au.push({category:"sendConsent",consented:t,consentType:"custom"}),H(this.LAST_SEEN_CUSTOM_KEY,1*new Date)),ga(`${d}.send`,{hitType:"event",eventCategory:t?"user_consent":"user_nonconsent",eventAction:window.location.hostname}),!0}sendRequest(t){H(this.LAST_SEEN_TCF_KEY,1*new Date),window.au.push({category:"sendConsent",consented:t.vendor.consents[561]||!1,consentType:"gdpr",consentString:t.tcString})}WmgConsentListeners(){document.querySelectorAll("div.overlay, .ppclose, .ppclose2").forEach(e=>{e.addEventListener("click",()=>this.SendToQueue(!0)),e.addEventListener("touchend",()=>this.SendToQueue(!0))})}UproxxConsentListeners(){document.querySelectorAll(".qc-cmp-button").forEach(e=>{let r=!0;e.textContent.toLowerCase().includes("do not")&&(r=!1),e.addEventListener("click",()=>this.SendToQueue(r)),e.addEventListener("touchend",()=>this.SendToQueue(r))})}addConsentListeners(){String(this.partnerId)==="14"&&this.WmgConsentListeners(),String(this.partnerId)==="24"&&this.UproxxConsentListeners();try{__tcfapi("addEventListener",2,(t,e)=>{e&&(t.eventStatus==="tcloaded"&&t.gdprApplies&&Z(this.LAST_SEEN_TCF_KEY,this.COOKIE_TTL,1*new Date)&&this.sendRequest(t),t.eventStatus==="useractioncomplete"&&t.gdprApplies&&this.sendRequest(t))})}catch(t){return!1}return!1}}const st=60*1e3,at=60*st,ve=24*at;function Mt(n){var t="au/test";try{return n.localStorage.setItem(t,t),n.localStorage.removeItem(t),!0}catch(e){return!1}}class Nt{constructor(t){this.w=t,this.now=1*new Date,this.useCookie=!Mt(this.w)}getCookie(t){return D(t)}get(t,e=!1){if(this.useCookie||e)return this.getCookie(t);let r=this.w.localStorage.getItem("au/"+t);if(r){if(r=JSON.parse(r),r.e>this.now)return r.v;this.w.localStorage.removeItem("au/"+t)}return null}setCookie(t,e,r=st){H(t,e)}set(t,e,r=st,s=!1){this.useCookie||s?this.setCookie(t,e,r):this.w.localStorage.setItem("au/"+t,JSON.stringify({v:e,e:this.now+r}))}}const Ut=Nt;var At=n=>{throw TypeError(n)},jt=(n,t,e)=>t.has(n)||At("Cannot "+e),Vt=(n,t,e)=>t.has(n)?At("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),ot=(n,t,e)=>(jt(n,t,"access private method"),e),it,St,gt,Et;function Bt(n,t){let e=[];try{if(typeof t.featurePolicy=="undefined")return e;"browsingTopics"in t&&t.featurePolicy.allowsFeature("browsing-topics")&&e.push("BT"),"joinAdInterestGroup"in n.navigator&&t.featurePolicy.allowsFeature("join-ad-interest-group")&&e.push("JI"),"runAdAuction"in n.navigator&&t.featurePolicy.allowsFeature("run-ad-auction")&&e.push("RA"),t.featurePolicy.allowsFeature("attribution-reporting")&&e.push("AR")}catch(r){console.error(r)}return e}class Ft{constructor(t,e,r){Vt(this,it),this.w=t,this.d=e,this.auvars=r,this.iframe=null,this.iframeQueue=[],this.iframeReady=!1}run(){let t=new XMLHttpRequest;const e=new URL(`${U}/api/v2/match`);let r={hostname:this.w.location.hostname,partner_id:this.auvars.p,audigent_id:this.auvars.a};this.auvars.t!=null&&(r.tagger_id=this.auvars.t);let s=N(this.w.location.hostname),i=this;return t.onload=function(){var o;if(t.readyState==XMLHttpRequest.DONE&&t.status==200){const a=JSON.parse(t.response);if(!Array.isArray(a))return;ot(o=i,it,St).call(o),a.forEach(g=>{var S;g.domain=s,ot(S=i,it,gt).call(S,g)})}},t.open("POST",e,!0),t.setRequestHeader("Content-type","application/json"),t.send(JSON.stringify(r)),!0}}it=new WeakSet,St=function(){this.iframe=this.d.createElement("iframe"),this.iframe.style.display="none",this.iframe.src=`${nt}/join-ad-interest-groups.html`,this.iframe.allow="join-ad-interest-group; attribution-reporting",this.d.body.appendChild(this.iframe);let n=this;this.iframe.onload=()=>{n.iframeReady=!0,n.iframeQueue.forEach(t=>{var e;ot(e=n,it,gt).call(e,t)})}},gt=function(n){n.channel="AUPA",n.evid=f(8),this.iframeReady==!1?this.iframeQueue.push(n):(this.iframe.contentWindow.postMessage(n,nt),ot(this,it,Et).call(this,n))},Et=function(n){const t=n.evid;switch(n.consumer){case"AUDIGENT":{const e=n.igs.map(r=>r.name);this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"join_ad_interest_group",interest_groups:e,event_id:t}})}break;case"YAHOO":case"NEXTROLL":{const e=n.segs;this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"external_audience",audiences:e,event_id:t,consumer:n.consumer}});break}default:break}};var Wt=Object.defineProperty,Jt=Object.defineProperties,Xt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,zt=Object.prototype.hasOwnProperty,Kt=Object.prototype.propertyIsEnumerable,Ct=n=>{throw TypeError(n)},Pt=(n,t,e)=>t in n?Wt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,q=(n,t)=>{for(var e in t||(t={}))zt.call(t,e)&&Pt(n,e,t[e]);if(Tt)for(var e of Tt(t))Kt.call(t,e)&&Pt(n,e,t[e]);return n},ft=(n,t)=>Jt(n,Xt(t)),bt=(n,t,e)=>t.has(n)||Ct("Cannot "+e),It=(n,t,e)=>(bt(n,t,"read from private field"),e?e.call(n):t.get(n)),Lt=(n,t,e)=>t.has(n)?Ct("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),Ot=(n,t,e,r)=>(bt(n,t,"write to private field"),r?r.call(n,e):t.set(n,e),e),dt,ct;const X=window,ut=document,Rt={"og:title":"title","og:description":"description","og:image":"image","og:url":"url","og:type":"type","og:name":"name","og:locale":"locale"},xt={description:"description",keywords:"keywords"},Yt="meta[name='audigent:tags']";class Qt{constructor(t){Lt(this,dt),Lt(this,ct);const{auvars:e,decoratorTarget:r,taggerStrategy:s}=t||{};this.w=X,this.u=X.location,this.d=ut,this.auvars=e,this.dataStore=new Ut(X),this.customOptions={},this.isIndexPage=this.u.pathname==="/",this.customTags=[],this.customAttributes={},this.userDefinedTags=[],this.userDefinedAttributes={},this.internalLinks=[],this.GlobalHandlers={},this.randNum=Math.random(),this.decoratorTarget=r||(this.isIndexPage?.95:.97),this.u.hostname.toLowerCase().endsWith("lnk.to")?this.taggerStrategy="FULL_PATH":this.taggerStrategy=s||this.auvars.tgs||"NONE",Ot(this,dt,new pt(this.auvars.p,this.dataStore)),this.psf=Bt(this.w,this.d),Ot(this,ct,new Ft(this.w,this.d,this.auvars,this.dataStore)),this.setupSessionId(),this.setupHadron(),this.setupGA(),this.setupGA4()}docReady(){if(this.customOptions.autoPageView!==!1&&this.sendPageView(),this.setupConsentHandler(),this.ListenerIterator("a",this.clickHandler),X.addEventListener("hashchange",()=>{this.sendSPAPageView({url:this.u.href}),this.pixels()}),window.Shopify){const t=new ht(this.auvars.p,this.auvars.t);t.initialize(),window.addEventListener("aupixels",()=>{t.updatePixels()})}this.psf.includes("JI")&&It(this,ct).run()}clearOptions(){this.customOptions={}}setOptions(t){const{options:e}=t||{};return typeof e=="object"?(this.customOptions=q(q({},this.customOptions),e),!0):!1}observeDom(t,e,r={childList:!0}){const s=window.MutationObserver||window.WebKitMutationObserver;if(!(!t||t.nodeType!==1))if(s){const i=new s(e);return i.observe(t,r),i}else window.addEventListener&&(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1))}push(t,e,r){if(typeof t=="string")return e&&e!==this.auvars.p?(console.warn("[Audigent] skip .push("+t+"), p is not a match"),!1):(console.warn('[Audigent] deprecated use of "push": please use .push( object )'),(this[t]||(()=>!1)).call(this,r),!0);if(t&&typeof t=="object"){const{fn:s,category:i,partnerId:o}=t,a=s||i;if(o&&o!==this.auvars.p)return console.warn("[Audigent] skip .push("+a+"), partnerId is not a match"),!1;if(s){const g=t.args;return Array.isArray(g)?(g.map(S=>(this[a]||(()=>!1)).call(this,S)),!0):((this[a]||(()=>!1)).call(this,g),!0)}return(this[a]||(()=>!1)).call(this,t),!0}return console.warn("[Audigent] could not execute the required command: please check your syntax"),!1}setupHadron(){(this.w.hadron||{loaded:!1}).loaded===!0?this.auvars.h=this.w.hadron.id:this.auvars.h=null}getAudigentId(t){if(t instanceof Function)return t(this.auvars.a),this.auvars.a;const{callback:e}=t||{};return e instanceof Function&&e(this.auvars.a),this.auvars.a}setupSessionId(){let t=this.dataStore.get("sid");t==null&&(t=P()),this.auvars.s=t,this.dataStore.set("sid",t,30*st)}getTaggerComponents(){return null}setupTaggerId(){const t=this.u.hostname.toLowerCase(),e=this.getTags();let r=this.getTaggerComponents();Array.isArray(r)&&r.length>0||(this.taggerStrategy=="FULL_PATH"?r=[t,this.u.pathname,this.auvars.p]:Array.isArray(e)&&e.length>0?r=[t,"["+e.join(",").toLowerCase()+"]",this.auvars.p]:r=[t,"/",this.auvars.p]);const s=j(r.join("")).toLowerCase();return this.auvars.t=s,this.dataStore.set("tid",s,at),s}getMetaAttributes(){const t=this.d.querySelectorAll("meta");let e={url:this.u.href,title:this.d.title};for(const r of t){let s;const i=r.getAttribute("property");if(i!==void 0)i in Rt&&(s=Rt[i]);else{const o=r.getAttribute("name");o in xt&&(s=xt[o])}if(s!==void 0){const o=r.getAttribute("content");o!==void 0&&typeof o=="string"&&(s==="keywords"?e[s]=o.split(",").map(a=>a.trim()).filter(a=>a.length>0):(!(s in e)||e[s].length<o.length)&&(e[s]=o))}}return e}getCustomAttributes(){return{}}getAttributes(){return q(q(q(q({},this.customAttributes),this.userDefinedAttributes),this.getCustomAttributes()),this.getMetaAttributes())}clearAttributes(){this.userDefinedAttributes={}}setAttributes(t){const{attributes:e}=t||{};return typeof e=="object"?(this.userDefinedAttributes=e,!0):!1}addAttributes(t){const{attributes:e}=t||{};return typeof e=="object"?(this.userDefinedAttributes=q(q({},this.userDefinedAttributes),e),!0):!1}getMetaTags(){const t=document.head.querySelectorAll(Yt)[0];return t?t.content.split("|").map(e=>e.trim()).filter(e=>e.length>0).map(e=>(this.u.hostname+" > "+e).toUpperCase()):[]}getCustomTags(){return[]}getTags(){return[...this.customTags,...this.userDefinedTags,...this.getCustomTags(),...this.getMetaTags()].filter(e=>typeof e=="string"||e instanceof String).map(e=>e.replace(/,/g,"")).map(e=>e.trim()).filter(e=>e.length>0).map(e=>e.toUpperCase())}clearTags(){this.userDefinedTags=[]}setTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=e,!0):typeof e=="string"?(this.userDefinedTags=[e],!0):!1}addTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=[...e,...this.userDefinedTags],!0):typeof e=="string"?(this.userDefinedTags=[e,...this.userDefinedTags],!0):!1}writeDecoratorRecord(t){const{tags:e,decor_dict:r,attributes:s}=t;this.customTags=[...this.customTags,...e||[]],this.customAttributes=q(q(q({},this.customAttributes),r||{}),s||{})}sendDecoratorRecord(){if(!(this.randNum>=this.decoratorTarget))return null;const e=this.getAttributes(),r=this.getTags(),s=ft(q({},e),{tags:r.join(),tagger_id:this.auvars.t,partner_id:this.auvars.p});let i=new XMLHttpRequest,o=`${w}/api/v1/dec`;return i.open("POST",o,!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(s)),i}setupGA(){X.ga||function(t,e,r,s,i,o,a){t.GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,o=e.createElement(r),a=e.getElementsByTagName(r)[0],o.async=1,o.src=s,a.parentNode.insertBefore(o,a)}(X,ut,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create",p,"auto",d),this.auvars.disable_ecommerce||(ga(`${d}.require`,"ecommerce"),ga(`${d}.require`,"ec")),ga(`${d}.set`,"anonymizeIp",!0),ga(`${d}.set`,"dimension1",this.auvars.a),ga(`${d}.set`,"dimension2","none"),ga(`${d}.set`,"dimension3",this.auvars.p),ga(`${d}.set`,"dimension4",this.u.hostname),ga(`${d}.set`,"dimension5",this.u.pathname),ga(`${d}.set`,"dimension6","Passive Tagger")}setupGA4(){try{var t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id="+m+"&l=audDataLayer",t.async=!0,document.head.appendChild(t),typeof X.audGtag!="function"&&(X.audDataLayer=X.audDataLayer||[],X.audGtag=function(){X.audDataLayer.push(arguments)}),audGtag("js",new Date),audGtag("config",m,{user_id:this.auvars.a,dimension3:this.auvars.p,dimension4:this.u.hostname,dimension5:this.u.pathname,groups:"audigent",send_page_view:!1})}catch(e){console.error(e)}}ListenerIterator(t,e){Array.prototype.forEach.call(this.d.querySelectorAll(t),r=>{this.ListenerAttacher({input:r,method:e})})}ListenerAttacher(t){const{input:e,method:r}=t;e!=null&&(e.addEventListener?e.addEventListener("mousedown",r.bind(this),!1):e.attachEvent&&e.attachEvent("mousedown",r))}GlobalListenerHandler(t){this.GlobalHandlers[t.type].forEach(e=>{if(t.target.matches(e.selector))e.method(t);else{let r=t.target,s=!1;for(;r.parentElement&&!s;)r=r.parentElement,s=r.matches(e.selector),s&&e.method(ft(q({},t),{target:r}))}})}GlobalListenerAttacher(t,e,r){typeof t=="string"&&(t=[t]),t.forEach(s=>{this.GlobalHandlers[s]=this.GlobalHandlers[s]||[],this.GlobalHandlers[s].push({selector:e,method:r}),document.addEventListener?(document.removeEventListener(s,window.au.l),document.addEventListener(s,window.au.l)):document.attachEvent&&(document.detachEvent(s,window.au.l),document.attachEvent(s,window.au.l))})}sendOffsiteClick(t){const{url:e}=t;L(`${R}/api/v1/off-site-click/${this.auvars.p}?tagger_id=${this.auvars.t}&url=${e}`)}clickHandler(t){let e=t.currentTarget.getAttribute("href");e!==null&&this.internalLinks.includes(window.location.hostname)&&window.au.push({category:"sendSPAPageView",url:e})}sendUserBehaviour(t){const{action:e}=t,r={click_url:e,tagger_id:this.auvars.t,audigent_id:this.auvars.a,partner_id:this.auvars.p},s=new Blob([JSON.stringify(r)],{type:"application/json"});this.w.navigator.sendBeacon(`${w}/api/v1/ubh`,s)}behavior(t){const e=encodeURIComponent(`${this.u.protocol}//${this.u.hostname}${this.u.pathname}__audigent-behavior-${t.action}${this.u.search}${this.u.hash}`);this.sendOffsiteClick({url:e}),this.sendGAEvent({eventCategory:"audigent-behavior",eventAction:t.action,eventLabel:this.auvars.t})}sendEvent(t){let{event:e,events:r,type:s}=t;if(e=e||r,!e){if(!s)return null;e=q({},t),delete e.category,delete e.partnerId}const i={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,events:Array.isArray(e)?e:[e]};let o=new XMLHttpRequest,a=`${w}/api/v1/event`;return o.open("POST",a,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(i)),""}sendGAEvent(t){const{eventCategory:e,eventAction:r,eventLabel:s,skipSQS:i}=t;ga(`${d}.send`,{hitType:"event",eventCategory:e,eventAction:r,eventLabel:s}),i||window.au.push({category:"sendEvent",event:{type:e,eventAction:r,eventLabel:s}})}sendConsent(t){const e={audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,consented:t.consented,consent_type:t.consentType,consent_string:t.consentString};let r=new XMLHttpRequest,s=`${w}/api/v1/con`;return r.open("POST",s,!0),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(e)),""}segCapture(){const{au_seg:t}=window,e=(t||{}).segments||[];if((e.length>0||this.auvars.p=="584")&&this.randNum>=.9){const r={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,segment_ids:e.length>0?e.join("|"):null};let s=new XMLHttpRequest,i=`${w}/api/v1/segs`;return s.open("POST",i,!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(r)),!0}return!1}pixels(){const t=`${Y}/api/v1/getpixels?tagger_id=${this.auvars.t}&url=${encodeURIComponent(this.u.href)}&code='none'`;B(t,!0)}setupConsentHandler(){It(this,dt).addConsentListeners()}sendSPAPageView(t){let{url:e}=t;if(e){e.startsWith("//")&&(e="http://"+e),(e.startsWith("/")||!e.includes("://"))&&(e=this.d.location.protocol+"//"+this.d.location.host+(e.startsWith("/")?"":"/")+e);try{let r=new URL(e);r.host===this.d.location.host&&(this.sendOffsiteClick(r.href),ga(`${d}.send`,"pageview",r.pathname+r.hash))}catch(r){}}}tags(t){console.warn("[Audigent] this method is deprecated (params: "+JSON.stringify(t)+"). Use addTags/setTags/clearTags instead. Please contact your account manager for more info.");const r=(t.action||t.data||[]).map(s=>s.toUpperCase());this.push({category:"addTags",tags:r})}conversion(t){console.log(`[Audigent] Conversion Event - ${t.action}`)}sendPageView(t){this.randNum=Math.random();const e=this.setupTaggerId(),r=1*new Date,s={event_timestamp:r,url:this.w.location.href,referrer:this.d.referrer,partner_id:this.auvars.p,tagger_id:this.auvars.t,audigent_id:this.auvars.a,session_id:this.auvars.s,p_s_f:this.psf};this.auvars.h&&(s.hadron_id=this.auvars.h);const i=(t||{}).data||{},o={category:"pageView",version:"v2",created_at:r,properties:q(q({},s),i)};let a=new XMLHttpRequest,g=`${R}/api/v1/collect`;a.open("POST",g,!0),a.withCredentials=!0,a.setRequestHeader("Content-type","text/plain"),a.send(this.w.btoa(JSON.stringify(o))),this.pixels(),this.sendDecoratorRecord(),ga(`${d}.set`,"dimension7",e),audGtag("set",{dimension7:e,send_to:m}),(this.randNum>=.95||["158"].includes(this.auvars.p.toString())&&this.randNum>=.8||["220"].includes(this.auvars.p.toString())&&this.randNum>=.5)&&audGtag("event","page_view",{dimension7:e,send_to:m})}beopEvent(t){const e=t.partnerId||this.auvars.p;this.sendEvent({event:ft(q({},t.data||{}),{partner_id:e,type:"beop"})})}trackEvent(t){return!1}DispatchEvent(t){const{eventName:e}=t,s=(i=>{if(typeof window.CustomEvent=="function")return new CustomEvent(i);const o={bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");return a.initCustomEvent(i,o.bubbles,o.cancelable,o.detail),a})(e);window.dispatchEvent(s)}optout(){L(`${J}/api/v1/optout?au_id=${this.auvars.a}`)}setupInPageTaxonomy(t){let e=new URL(`${U}/api/v1/segments`);if(e.searchParams.set("url",encodeURIComponent(this.u.href)),e.searchParams.set("partner_id",this.auvars.p),this.auvars.t!==void 0)e.searchParams.set("tagger_id",this.auvars.t);else{const i=this.setupTaggerId();e.searchParams.set("tagger_id",i)}e.searchParams.set("au_id",this.auvars.a);let r=new XMLHttpRequest,s=this;r.timeout=1e4,r.onload=function(){if(r.readyState==XMLHttpRequest.DONE&&r.status==200){const o=JSON.parse(r.response);s.w.au_seg=o,(t||[]).forEach(a=>a(X,ut,o.segments));var i=new CustomEvent("auSegReady",{detail:o});ut.dispatchEvent(i),s.segCapture()}},r.ontimeout=function(){console.log("[Audigent] Taxonomy Service > Timeout")},r.onerror=function(){console.log("[Audigent] Taxonomy Service > Invalid Response")},r.open("GET",e,!0),r.send()}addUserIdentity(t){if(!t)return!1;const{identityType:e,identityValue:r}=t;if(e===void 0||r===void 0)return!1;if(e==="email"){const s=window.btoa(r);return this.sendEvent({event:{type:"e",value:s}})}else return this.sendEvent({event:{type:"u",[e]:r,identityType:e,identityValue:r}})}addUserEmailAddress(t){if(!t)return!1;const{identityValue:e}=t;if(e===void 0)return!1;let r=e.toLowerCase().trim();if(r.endsWith("@gmail.com")){let i=r.split("@")[0];i=i.split("+")[0],i=i.replace(/\./g,""),r=i+"@gmail.com"}const s=O()(r).toString();return this.addUserIdentity({identityType:"hem_sha256",identityValue:s})}addUserProperty(t){if(!t)return!1;const{propertyName:e,propertyValue:r}=t;return e===void 0||r===void 0?!1:e==="email"?this.addUserIdentity({identityType:"email",identityValue:r}):this.sendEvent({event:{type:"user.property",propertyName:e,propertyValue:r}})}}dt=new WeakMap,ct=new WeakMap;const Zt=Qt;var te=Object.defineProperty,ee=Object.defineProperties,re=Object.getOwnPropertyDescriptors,$t=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,vt=(n,t,e)=>t in n?te(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Gt=(n,t)=>{for(var e in t||(t={}))ne.call(t,e)&&vt(n,e,t[e]);if($t)for(var e of $t(t))se.call(t,e)&&vt(n,e,t[e]);return n},kt=(n,t)=>ee(n,re(t)),z=(n,t,e)=>vt(n,typeof t!="symbol"?t+"":t,e);class ie{constructor(t,e,r){z(this,"lineItemsContain",s=>this.lineItemIds.map(i=>i.toString()).includes((s||"").toString())),z(this,"setJWPlayerListener",()=>{window.jwplayer&&(window.jwplayer().on("adImpression",this.readJWPlayerImpression),window.jwplayer().on("adComplete",s=>this.readJWPlayerImpression(s,!0)))}),z(this,"readJWPlayerImpression",(s,i)=>{var o;window.auvars[this.auvars.p].jwp_impressions=window.auvars[this.auvars.p].jwp_impressions||[],window.auvars[this.auvars.p].jwp_impressions.push(s);const a="",g="",S=s.viewable,T=s.viewable,x=`jwplayer-${s.placement}`,{pageTop:l,pageBot:u,slotMiddle:c}=this.determineViewability(window.jwplayer().getContainer())||{},h=((o=s==null?void 0:s.ima)==null?void 0:o.ad)||{},v=(h==null?void 0:h.data)||(h==null?void 0:h.g)||{};(v.adWrapperIds||[]).forEach((C,_)=>{const G=C,$=v.adWrapperCreativeIds[_],b=v.mediaUrl,yt={advertiser_id:a,campaign_id:g,line_item_id:G,creative_id:$,ad_slot_id:x,creative_blob:b,viewable:S,inViewPercentage:T,pageTop:l,pageBot:u,slotMiddle:c,event:"jwplayerAdImpression"};this.adSlots[x]=yt,window.au.push({category:"sendEvent",events:[kt(Gt({type:"jwp_impression"},yt),{jwpType:s.type||""})]}),v.adWrapperSystems[_]==="GDFP"&&this.lineItemsContain(C)&&!i&&this.sendAdSlotInformation(yt)})}),z(this,"getAdSlotPayload",s=>{if(!s)return!1;const{advertiserId:i,campaignId:o,lineItemId:a,creativeId:g}=s.getResponseInformation()||{},S=document.getElementById(s.getSlotElementId()),T="",{pageTop:x,pageBot:l,slotMiddle:u,viewable:c,inViewPercentage:h}=this.determineViewability(S)||{};return{advertiser_id:i,campaign_id:o,line_item_id:a,creative_id:g,ad_slot_id:s.getAdUnitPath(),creative_blob:T,viewable:c,inViewPercentage:h,pageTop:x,pageBot:l,slotMiddle:u}}),z(this,"collectAndSendGoogleAdSlot",(s,i)=>{const o=this.getAdSlotPayload(s)||{};return o.event=i,this.adSlots[o.ad_slot_id]=o,this.sendAdSlotInformation(o),!0}),z(this,"determineInViewPercentage",(s,i)=>{let o=0;return s.top>=0&&s.bottom<=i&&(o=1),s.top<0&&s.bottom>0&&s.bottom<=i&&(o=s.bottom/s.height),s.top>=0&&s.top<=i&&s.bottom>i&&(o=(i-s.top)/s.height),Math.round(o*100)}),z(this,"determineViewability",s=>{const i=window.scrollY,o=window.innerHeight,a=i+o;let g=-1,S=0,T=S>=50;if(s){const x=s.getBoundingClientRect();g=Math.round(x.top+x.height/2),S=this.determineInViewPercentage(x,o),T=S>=50}return{pageTop:i,pageBot:a,slotMiddle:g,viewable:T,inViewPercentage:S}}),z(this,"compareVisiblePercentage",(s,i,o)=>{const a=s.getAdUnitPath();this.adSlots[a]?this.adSlots[a].inViewPercentage<50&&i>=50&&this.collectAndSendGoogleAdSlot(s,o):this.collectAndSendGoogleAdSlot(s,o)}),z(this,"setGoogleEventListener",()=>{window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotRenderEnded",s=>{this.collectAndSendGoogleAdSlot(s.slot,"slotRenderEnded")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotOnload",s=>{this.collectAndSendGoogleAdSlot(s.slot,"slotOnload")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("impressionViewable",s=>{this.collectAndSendGoogleAdSlot(s.slot,"impressionViewable")})}),window.googletag.cmd.push(()=>{window.googletag.pubads().addEventListener("slotVisibilityChanged",s=>{this.compareVisiblePercentage(s.slot,s.inViewPercentage,"slotVisibilityChanged")})})}),z(this,"getCurrentGoogleAdSlots",()=>{const s=window.googletag&&window.googletag.pubads&&window.googletag.pubads().getSlots();return s?(s.forEach(i=>this.collectAndSendGoogleAdSlot(i,"pageLoad")),!0):!1}),z(this,"sendAdSlotInformation",s=>{if(!this.orderIds.includes(s.campaign_id)&&!this.lineItemsContain(s.line_item_id))return!1;const i=new Date,o=kt(Gt({},s),{datetime:i.toISOString(),audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,visit_id:this.auvars.visit_id,partner_site_host:window.location.hostname,partner_site_path:window.location.pathname});window.auvars[this.auvars.p].ad_slot_events=window.auvars[this.auvars.p].ad_slot_events||[],window.auvars[this.auvars.p].ad_slot_events.push(o),this.sendAdSlotToGoogleAnalytics(o);const a=new XMLHttpRequest,g=`${w}/api/v1/otp/dfp`;return a.open("POST",g,!0),a.setRequestHeader("Content-type","application/json"),a.send(JSON.stringify(o)),a}),z(this,"sendAdSlotToGoogleAnalytics",s=>{const{visit_id:i,advertiser_id:o,campaign_id:a,line_item_id:g,creative_id:S,tagger_id:T}=s,{advertiser_ids:x,campaign_ids:l,line_item_ids:u,creative_ids:c}=this.sharedToGA;return x.includes(o)&&l.includes(a)&&u.includes(g)&&c.includes(S)?!1:(this.sharedToGA.advertiser_ids.push(o),this.sharedToGA.campaign_ids.push(a),this.sharedToGA.line_item_ids.push(g),this.sharedToGA.creative_ids.push(S),window.ga(`${d}.set`,"dimension10",i),window.ga(`${d}.set`,"dimension11",o),window.ga(`${d}.set`,"dimension12",a),window.ga(`${d}.set`,"dimension13",g),window.ga(`${d}.set`,"dimension14",S),this.auvars.p.toString()==="158"&&window.ga(`${d}.send`,"pageview"),window.ga(`${d}.send`,{hitType:"event",eventCategory:"smartotp",eventAction:"impression",eventLabel:T}),window.ga(`${d}.set`,"dimension11",""),window.ga(`${d}.set`,"dimension12",""),window.ga(`${d}.set`,"dimension13",""),window.ga(`${d}.set`,"dimension14",""),!0)}),this.auvars=t,this.adSlots={},this.sharedToGA={advertiser_ids:[],campaign_ids:[],line_item_ids:[],creative_ids:[]},this.orderIds=e||[],this.lineItemIds=r||[],this.getCurrentGoogleAdSlots(),this.setGoogleEventListener()}}const ae=ie;var me=K(116);function oe(n,t){const e="158";let r=n.au&&Array.isArray(n.au)?[...n.au]:[];n.auvars.autag_objs=[...(n.auvars.autag_objs||[]).filter(s=>s!=="autag"),"autag"],n.au={push:(...s)=>{n.auvars.autag_objs.forEach(i=>Object.values(n[i]||{}).forEach(o=>o.push(...s)))},l:s=>{n.auvars.autag_objs.forEach(i=>Object.values(n[i]||{}).forEach(o=>o.GlobalListenerHandler(s)))},init:()=>{n.auvars[e].hist=n.auvars[e].hist||[];const s=n.auvars[e].hist.slice(-1)[0];n.autag=n.autag||{},(!n.autag[e]||s!==n.location.href)&&(n.auvars[e].hist.push(n.location.href),n.autag[e]=t({auvars:n.auvars[e]}))}},n.au.init(),r.forEach(s=>n.au.push(s))}docReady(()=>window.au.push({category:"docReady"}));var de=Object.defineProperty,ce=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,qt=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,mt=(n,t,e)=>t in n?de(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,wt=(n,t)=>{for(var e in t||(t={}))le.call(t,e)&&mt(n,e,t[e]);if(qt)for(var e of qt(t))he.call(t,e)&&mt(n,e,t[e]);return n},Dt=(n,t)=>ce(n,ue(t)),pe=(n,t,e)=>mt(n,typeof t!="symbol"?t+"":t,e);class ge extends Zt{constructor(t){super(t),pe(this,"checkJW",()=>this.jwp?(window.clearInterval(this.jwpInterval),null):(window.jwplayer&&(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()),null)),this.tagsReader(),this.auvars.visit_id=O()(`${this.auvars.a}-${this.auvars.p}-${Date.now()}`).toString(),this.orderIds=[2900055810,2800288231,2891350216,2430343433,2877953001,2776381195,2841579083,2914646399,2811709422,2926983725,2796335699,2884513845,2829955320,2903841116,2733074813,2697661630,2792713087,2921587863,2939321473,2938145417,2947289709,2959018529,2956847257,2956205941,2958816444,2970924710,2972735884,2983676295,2994581224,2983439165,2991963287,3003612211,3028254224,3029976933,3032140244,3038913241,3034810542,2980079696,3073088604,3079108697,3089527339,3075341921,3150448250,3098451535,3113785080,3201949431,3194669712,3207760019,3214762549,3209458972,3219912403,3234412535,3253098606,3252727333,3253469729,3255205111,3263607100,3260923330,3264020863,3267059893,3268976762,3269601010,3271897640,3343579169,3353730232,3253065077,3242703809,3530992455,3532992876,3531555334,3532177864,3535506658,3535602842,3548140975,3545901268,3569419584],this.lineItemIds=["5837159488","5571436280","5783448216","5570139759","5783448225","5570139741","5761545988","5838772240","5785369187","5784798379","5835922698","5784798388","5837159503","5784798376","5785369859","5837159494","5839420556","5785369856","5570139747","5784798370","5785369853","5699466638","5570139750","5823087115","5838769909","5837159491","5788427160","5837159506","5835922689","5570139753","5571256462","5835922692","5784798385","5835922695","5838772237","5570139756","5823087109","5785369199","5785369193","5783448219","5823087118","5732727358","5571436277","5784798391","5779072942","5823087112","5838772246","5775108648","5823087103","5838772243","5785369184","5823087106","5732728285","5837159497","5784798373","5785369190","5785369196","5837159500","5790369275","5570139744","5784798382","5784798394","5783448222","5837159485","5837500044","5864800215","5864800221","5864800224","5866713284","5864800227","5864800230","5864800233","5864800236","5866042051","5866713287","5863568100","5863568103","5863568106","5863568109","5863568112","5863568115","5863568313","5863568316","5863568319","5864823262","5864823268","5863568097","5863568136","5863568139","5863568301","5863568304","5863568307","5863568310","5863568118","5863568121","5863568124","5863568127","5863568130","5863568133","5865821662","5893449075","5966923345","5966925760","5967431645","5967445127","5966923342","5966925265","5966925268","5966925271","5966925757","5966925763","5966925766","5966925769","5967431648","5967448694","5967448697","6308957647","6321323944","6321335251","6319186044","6319186023","6319186293","6321334972","6321335413","6321335449","6321335476","6321335680","6321930437","6321930458","6351603345","6402338322","6509316876","6511558030","6511687594","6511811675","6700247472"],this.jwp=!1}docReady(){super.docReady(),this.smartOtpDfp=new ae(this.auvars,this.orderIds,this.lineItemIds),window.jwplayer?(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()):this.jwpInterval=window.setInterval(this.checkJW,100)}sendEcommerceEvent(t){const{type:e,data:r}=t,s=new et;window.addEventListener("aupixels",()=>{s.updatePixels()});const i="Fandom";if(!e||!r)return!1;if(e==="add"||e==="add_to_cart"){const o=Dt(wt({},r),{brand:r.brand||i});s.sendAddProductEventToGA(o);const a={event:"addToCart",data:o};window.au.push({category:"behavior",action:"purchase-intent"}),s.profilerServiceRequest(a)}if(e==="transaction"){const o=Dt(wt({},r),{id:`${r.orderId}-${this.auvars.t}`,affiliation:r.brand||i});let a=o.items||[];a.length&&(a=a.map(g=>({id:g.productId||"",name:g.name||"",brand:g.brand||i,price:g.price||0,quantity:g.quantity||1}))),this.sendEvent({events:[wt({type:"purchase"},r)]}),s.appendPageLoadPixelCheck("transaction"),s.sendAllProductsInTransactionToGA(a,()=>s.sendTransactionEventToGA(o)),window.localStorage.setItem("autx",JSON.stringify([...JSON.parse(window.localStorage.getItem("autx")||"[]"),r.orderId]))}return null}tagsReader(){let t=[];const e=[],r=[],s=this.d.querySelectorAll("div[data-gpt-page-params]"),i={gnre:["genre",[]],tv:["tv",[]],media:["media",[]],s0:["vertical",[]],s0c:["category",[]],esrb:["esrb",[]],pform:["platform",[]],pub:["publisher",[]],theme:["content theme",[]]};e.push((((window.ads||{}).context||{}).targeting||{}).wikiCategory||null),r.push((((window.ads||{}).context||{}).targeting||{}).wikiVertical||null),s.forEach(T=>{const x=JSON.parse(T.getAttribute("data-gpt-page-params"));Object.keys(i).forEach(l=>{let u=x[l]||[];typeof u=="string"&&(u=[u]),u.forEach(c=>{i[l][1].includes(c.toLowerCase())||i[l][1].push(c.toLowerCase())}),e.push(x.s0||null),r.push(x.s0v||null)})}),Object.values(i).forEach(T=>T[1].forEach(x=>t.push(`${T[0].toLowerCase()} > ${x.toLowerCase()}`))),t=t.map(T=>T.toUpperCase());const o={};if(o.primaryCategory=Array.from(new Set(e.filter(T=>T>""))).join(),o.pageType=Array.from(new Set(r.filter(T=>T>""))).join(),this.u.hostname.match(/(gamespot\.com|giantbomb\.com|metacritic\.com|tvguide\.com)$/gi)==null){this.push({category:"writeDecoratorRecord",tags:t,decor_dict:o});return}const a=this.d.querySelector('meta[name="adtags"]');if(a==null){this.push({category:"writeDecoratorRecord",tags:t,decor_dict:o});return}const g={genre:"GENRE",gnre:"GENRE",productGenre:"GENRE",game:"GAME",franchise:"FRANCHISE",con:"PLATFORM",pform:"PLATFORM",network:"TV",tv:"TV",ptype:"PAGE TYPE"};new URLSearchParams(a.getAttribute("content")).forEach((T,x)=>{if(T.indexOf("|")>-1)return;const l=g[x];if(l){let u=!0;x==="ptype"&&(this.u.hostname.match(/gamespot\.com/gi)!=null&&["reviews_door","entertainment_reviews_door","review"].includes(T)||this.u.hostname.match(/metacritic\.com/gi)!=null&&["critic_reviews","user_reviews"].includes(T)?T="REVIEWS":u=!1),u&&(t=[...t,...T.split(",").filter(c=>(typeof c=="string"||c instanceof String)&&c.trim().length>0&&c!=="undefined").map(c=>`N&R > ${l} > ${c.trim()}`.toUpperCase())])}}),this.push({category:"writeDecoratorRecord",tags:t,decor_dict:o})}}(function(n){oe(n,function(t){return new ge(t)})})(window)})()})();})();